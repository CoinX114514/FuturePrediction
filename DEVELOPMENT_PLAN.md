# 开发计划 - 基于 README_DEV.md

## 当前状态分析

### ✅ 已完成功能
1. **基础框架**
   - FastAPI 后端框架
   - React + TypeScript 前端框架
   - CSV 文件上传功能
   - 数据验证服务
   - 基础预测框架（占位符）

### ❌ 待开发功能
1. **数据库系统** - 完全缺失
2. **用户认证** - 完全缺失
3. **权限管理** - 完全缺失
4. **板块榜单** - 完全缺失
5. **实时行情** - 完全缺失
6. **Kronos 模型集成** - 仅有占位符
7. **预测任务队列** - 完全缺失

## 分阶段开发计划

### 阶段 1：数据库搭建（Week 1-2）🔴 当前阶段

#### 1.1 数据库环境准备
- [x] 安装 PostgreSQL（需要用户自行安装）
- [x] 创建数据库 SQL 脚本
- [x] 配置数据库连接（SQLAlchemy）

#### 1.2 数据库模型定义
- [x] 用户表（users）
- [x] 会话表（user_sessions）
- [x] 期货合约表（futures_contracts）
- [x] 行情数据表（market_data）
- [x] 预测任务表（prediction_tasks）
- [x] 预测结果表（prediction_results）
- [x] 板块表（sectors）
- [x] 机会提醒表（opportunity_alerts）
- [x] 数据源表（data_sources）

#### 1.3 ORM 配置
- [x] 安装 SQLAlchemy（已添加到 requirements.txt）
- [x] 配置数据库连接池
- [x] 创建数据库初始化脚本
- [x] 创建种子数据脚本

### 阶段 2：用户认证与权限（Week 3-4）

#### 2.1 用户认证系统
- [ ] 用户注册接口
- [ ] 手机号/邮箱登录
- [ ] JWT Token 生成和验证
- [ ] 密码加密（bcrypt）
- [ ] 会话管理

#### 2.2 权限管理系统
- [ ] 角色定义（普通用户/会员/超级管理员）
- [ ] 权限验证中间件
- [ ] 权限装饰器
- [ ] 预测次数限制逻辑

### 阶段 3：Kronos 模型集成（Week 5-6）

#### 3.1 模型服务完善
- [ ] 集成实际 Kronos 模型
- [ ] 模型加载和版本管理
- [ ] 多路径预测实现
- [ ] 置信区间计算

#### 3.2 预测任务系统
- [ ] 异步任务队列（Celery）
- [ ] 任务状态管理
- [ ] 结果存储到数据库
- [ ] 任务查询接口

### 阶段 4：板块榜单与实时行情（Week 7-8）

#### 4.1 板块榜单系统
- [ ] 板块数据初始化
- [ ] 涨幅榜计算
- [ ] 成交量榜计算
- [ ] 波动率榜计算
- [ ] 榜单 API 接口

#### 4.2 实时行情系统
- [ ] WebSocket 服务器
- [ ] 行情数据订阅
- [ ] 实时推送机制
- [ ] 断线重连处理

### 阶段 5：前端界面完善（Week 9-10）

#### 5.1 登录界面
- [ ] 登录页面
- [ ] 注册页面
- [ ] 找回密码

#### 5.2 主界面
- [ ] 交易仪表板
- [ ] K线图组件
- [ ] 板块榜单组件
- [ ] 预测面板
- [ ] 用户中心

### 阶段 6：测试与优化（Week 11-12）

#### 6.1 测试
- [ ] 单元测试
- [ ] 集成测试
- [ ] 性能测试

#### 6.2 优化
- [ ] 性能优化
- [ ] 缓存策略
- [ ] 错误处理完善

## 技术栈调整

根据 README_DEV.md，需要调整：
- 后端：保持 FastAPI（文档提到 Node.js + GraphQL，但已有 FastAPI，保持一致性）
- 数据库：PostgreSQL + Redis
- 任务队列：Celery（用于异步预测任务）
- WebSocket：FastAPI WebSocket 或 Socket.io

## 下一步行动

**立即开始：阶段 1.1 - 数据库环境准备**

